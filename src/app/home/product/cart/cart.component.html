


<div class="container" style=" position: absolute;
left: 200px;
min-width: 1200px;
margin-top: 10px;
box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
border-radius: 8px;
padding: 16px;" >

  <!-- Check if the cart is empty -->
  <div *ngIf="(cartItemsRdx$ | async)?.length === 0">
    <p></p>
  </div>

  <div class="main-container">
    <!-- Left Section -->
    <div class="left-section">
      <div class="header-container">
        <div class="header-icon">
          
        </div>
        <div class="header-title">Venta #551</div>
      </div>
      <div class="table-container">
        <div *ngIf="(cartItemsRdx$ | async) as cartItems; else loading">

        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>ArtÃ­culo</th>
              <th>Cantidad</th>
              <th>Precio</th>
              <th>Total</th>
               
           
            </tr>
          </thead>
     <tbody>
    <tr *ngFor="let item of cartItemsRdx$ | async; let i = index">
      <td>{{ item.product.id }}</td>

      <!-- ðŸ”¥ Si el id del producto es mayor a 5000, mostrar un select -->
      <td *ngIf="(item.product?.id ?? 0) >= 5000 && (item.product?.id ?? 0) <= 5010; else normalProduct">
        <select class="custom-select" (change)="updateMembershipPlan($event, i)">
          <option *ngFor="let plan of availablePlans" [value]="plan.id" [selected]="item.product?.id === plan.id">
            {{ plan.name }} - ${{ plan.price }}
          </option>
        </select>
      </td>

      <!-- ðŸ”¥ Si el producto NO es una membresÃ­a (id <= 5000), mostrar nombre y botones de cantidad -->
      <ng-template #normalProduct>
        <td>{{ item.product?.name }}</td>
      </ng-template>

      <!-- ðŸ”¥ Si el producto es una membresÃ­a, la cantidad siempre es 1 -->
      <td *ngIf="(item.product?.id ?? 0) >= 5000 && (item.product?.id ?? 0) <= 5010; else quantityControl">1</td>

      <!-- ðŸ”¥ Si el producto NO es una membresÃ­a, mostrar botones de cantidad -->
      <ng-template #quantityControl>
        <td>
          <button class="quantity-btn" (click)="updateQuantity(i, item.quantity - 1)" [disabled]="item.quantity <= 1">-</button>
          {{ item.quantity }}
          <button class="quantity-btn" (click)="updateQuantity(i, item.quantity + 1)">+</button>
        </td>
      </ng-template>

      <td>${{ item.product.price }}</td>
      <td>${{ item.product.price * item.quantity }}</td>
    </tr>
  </tbody>
          
        </table>
      </div>

      </div>
      


    </div>
  
    

     
    
     <div  *ngIf="detailProduct$ | async as detailProduct" >
    <app-right-section [totalImput]="miTotal" [price]="detailProduct.price" [name]="detailProduct.name"   (finishSale)="finish()"></app-right-section>
  </div>




  <!-- Show loading template while cart is loading -->
  <ng-template #loading>
    <p>Cargando carrito...</p>
  </ng-template>
</div>
<div style="    display: flex; margin-left: 150px; " >

<div class="keypad">
  <div class="key">7</div>
  <div class="key">8</div>
  <div class="key">9</div>
  <div class="key">x</div>

  <div class="key">4</div>
  <div class="key">5</div>
  <div class="key">6</div>
  <div class="key">-</div>

  <div class="key">1</div>
  <div class="key">2</div>
  <div class="key">3</div>
  <div class="key">+</div>

  <div class="key zero">0</div>
  <div class="key">Enter</div>
</div>

<div  *ngIf="detailProduct$ | async as detailProduct" class="img" style="margin-left: 17px;width: 195px;">
  <img *ngIf="detailProduct.img" [src]="detailProduct.img" alt="" style="width: 200px;
height: 150px;">
 </div>

</div>
<div class="modal" [ngClass]="{ 'show': showModal }">
  <div class="modal-content">
    <p>Â¿Desea eliminar este producto?</p>
    <button (click)="deleteItem(selectedIndex)">Eliminar</button>
    <button (click)="closeModal()">Cancelar</button>
  </div>
</div>

